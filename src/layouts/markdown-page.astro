---
import "@fontsource-variable/jetbrains-mono";
import "@fontsource/space-mono";
import "@fontsource/noto-sans-tc/chinese-traditional-400.css";
import "@fontsource/noto-sans-tc/chinese-traditional-700.css";

import Nav from "../components/Nav.astro";
import Footer from "../components/Footer.astro";
import { SEO } from "astro-seo";

let frontmatter = Astro.props.frontmatter;
const postImages = import.meta.glob("/src/assets/blog/**/*.{jpeg,jpg,png,gif,webp}"); 
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <title>{`${frontmatter.title} - Wolf Yuan`}</title>
    <SEO
      description={frontmatter.description}
      charset="UTF-8"
      openGraph={{
        basic: {
          title: frontmatter.description,
          type: "article",
          image: frontmatter.image,
        },
        article: {
          publishedTime: frontmatter.publish,
          modifiedTime: frontmatter.modify,
          authors: frontmatter.authors,
          tags: frontmatter.tags
        }
      }}
      twitter={{
        title: frontmatter.description,
        card: "summary",
        site: "@wolfyuan1135",
      }}
    />
    <link rel="me" href="https://mastodon.wolf-yuan.dev/@wolf" />
  </head>
  <body class="bg-gray-800 text-white">
    <Nav />

    <div class="sm:max-w-6xl mx-auto sm:px-7">
      <div class="relative block sm:rounded-xl bg-center bg-no-repeat bg-cover mx-auto w-full pt-[50%] sm:pt-[30%] z-[5] my-4 before:sm:rounded-xl before:content-[''] before:absolute before:inset-0 before:block before:bg-gradient-to-t before:from-black before:from-30% before:opacity-80 before:to-transparent before:z-[-5]" style={`background-image: url('${(await postImages[frontmatter.image]()).default.src}')`}>
        <div class="px-8 py-6">
          <h1 class="py-4 text-3xl font-extrabold md:text-4xl">
            {frontmatter.title}
          </h1>
          <p class="py-2 text-lg text-gray-300 md:text-xl">
            {frontmatter.description}
          </p>
        </div>
      </div>
    </div>

    <div class="max-w-6xl mx-auto">
      <div class="mx-7">
        <slot />
      </div>
    </div>

    <Footer />
    <noscript>
      <div
        class="fixed bottom-0 w-full bg-gray-800 border-2 border-indigo-400 hover:opacity-40 duration-300"
      >
        <div class="max-w-7xl mx-auto select-none">
          <div class="w-full p-4">
            <p class="text-xl font-extrabold py-4">
              JavaScript is disabled
            </p>
            <p class="py-4 md:py-0">
              JavaScript is disabled on this site, some feature and
              styling on this page might break.
            </p>
            <p class="hidden md:block">
              This site uses Google Analysis with Cloudflare Zaraz,
              please consider installing uBlock Origin instead of
              blocking JavaScript.
            </p>
            <p class="hidden text-sm py-4 text-gray-500 md:block">
              You can't dismiss this alert, how can I let it disappear
              dynamically if you disabled JavaScript :)
            </p>
          </div>
        </div>
      </div>
    </noscript>
  </body>
</html>
